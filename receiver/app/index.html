<!DOCTYPE html>
<html>
<head>
  <!-- bower:css -->
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
  <link rel="stylesheet" href="bower_components/fontawesome/css/font-awesome.css" />
  <link rel="stylesheet" href="bower_components/slick.js/slick/slick.css" />
  <!-- endbower -->
 <link href='http://fonts.googleapis.com/css?family=Gloria+Hallelujah' rel='stylesheet' type='text/css'>
 <link rel="stylesheet" href="css/style.css" />
 
  <title>MathCast</title>
</head>
<body>
  <ul id="menu" style="display:none;">
    <li data-menuanchor="page1" class="active"><a href="#page1">Page 1</a></li>
    <li data-menuanchor="page2"><a href="#page2">Page 2</a></li>
    <li data-menuanchor="page3"><a href="#page3">Page 3</a></li>
  </ul>
  <h1 class="text-center">Math Cast</h1>
  <div class="text-center" id="slick">
    <div>
      <span class="lead">
        Premi 'Inizia' per cominciare!
      </span>
    </div>
    <div>

    </div>
    <div>

    </div>
    <div>

    </div>
  </div>
  <!-- bower:js -->
  <script src="bower_components/jquery/dist/jquery.js"></script>
  <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
  <script src="bower_components/underscore/underscore.js"></script>
  <script src="bower_components/underscore.string/lib/underscore.string.js"></script>
  <script src="bower_components/slick.js/slick/slick.min.js"></script>
  <script src="bower_components/SoundJS/lib/soundjs-0.6.0.combined.js"></script>
  <!-- endbower -->
  <script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>
  <script type="text/javascript">

  $(document).ready(function() {
    
    var audioPath = "audio/";
    var manifest = [
        {id:"Good", src:"good.mp3"},
        {id:"Bad", src:"bad.mp3"}
    ];

    createjs.Sound.registerManifest(manifest, audioPath);

    window.slick = $('#slick').slick({
      speed: 2000,
      fade: true,
      slide: 'div',
      cssEase: 'linear'
    });

    window.castReceiverManager = cast.receiver.CastReceiverManager.getInstance();


    // Chiudo l'applicazione quando non ci sono pi√π sender collegati
    castReceiverManager.onSenderDisconnected = function(event) {
      console.log('Received Sender Disconnected event: ' + event.data);
      if (window.castReceiverManager.getSenders().length == 0) {
        window.close();
      }
    };

    window.stateBus = window.castReceiverManager.getCastMessageBus('urn:x-cast:it.strazz.cast.math.state');
    window.soundBus = window.castReceiverManager.getCastMessageBus('urn:x-cast:it.strazz.cast.math.sound');

    window.stateBus.onMessage = function(event) {
      window.slick.slickGoTo(event.data);
    }

    window.soundBus.onMessage = function(event) {
      createjs.Sound.play('error'===event.data ? 'Bad' : 'Good');
    }

    window.castReceiverManager.start();

  });
  </script>
</body>
</html>
